---
tags:
  - CSharp
  - IT
Источник: METANIT
date: 2025-09-05
завершена: true
---
## Оператор orderby и метод OrderBy()
---
Для сортировки набора данных с помощью LINQ можно использовать оператор ***`orderby`***:
```
var numbers = new List<int>() { 1, 2, 3, 12, 15, 25, 17, 16, 11 };
var sortedList = from n in numbers
                   orderby n
                   select n;

  
foreach (var n in sortedList) 
{
	Console.WriteLine(n);
}
```
В примере выше приведена простая реализация сортировки с использованием оператора *orderby*. Параметр *orderby* принимает критерий сортировки. В данном случае критерием сортировки выступает само число.

>[!idea]+ Внимание!
>Коллекция числовых типов сортируется как положено в математике а строковые переменные сортируются в алфавитном порядке.

Рассмотрим метод расширения ***`OrderBy()`***:
***`Orderby(Func<TSource, TKey> selector)`***
***`OrderBy(Func<Tsource, TKey> selector, IComparer<TKey>? comparer)`***
Первая вариация метода принимает делегат, который принимает элемент коллекции и возвращает значение, по которому будет происходить сортировка.
Вторая вариация метода позволяет также установить принцип сортировки.
Код с использованием метода ***`OrderBy()`*** выглядит так:
## Сортировка по убыванию и возрастанию
---
Для сортировки по убыванию можно использовать ключевое слово ***`descending`***:
```
var sortedList = from n in numbers
                   orderby n descending
                   select n;
```
или метод расширения ***`OrderByDescending()`***:
```
var sortedList = numbers.OrderByDescending(n => n);
```
## Множественные критерии сортировки
---
При сортировке сложных объектов иногда возникает необходимость сортировки сразу по нескольким критериям. Для этого можно указать критерии сортировки в порядке значимости через запятую:
```
var people = new List<Person>()
{
	 new Person("Andy", 25),
	 new Person("Candy", 35),
	 new Person("Sandy", 45),
	 new Person("Mandy", 55)
};

	 var sortedPeople = from p in people
                         orderby p.Name, p.Age
                         select p;

foreach (var n in sortedPeople)
{
	 Console.WriteLine($"{n.Name} – {n.Age}");
}
```
Получим такой вывод:
```
Andy – 25
Candy – 35
Mandy – 55
Sandy – 45
```

Для разных критериев сортировки можно указать направление сортировки для каждого критерия, добавив ключевое слово *descending*:
```
var sortedPeople = from p in people
                    orderby p.Name, p.Age descending
                    select p;
```

Аналогичный результат можно получить с использованием методов расширения ***`OrderBy`***, ***`OrderByDescending`***, ***`ThenBy`*** и ***`ThenByDescending`***:
***`var sortedPeople = people.OrderBy(p => p.Name).ThenBy(p => p.Age);`***
## Переопределение критерия сортировки
---
С помощью реализации ***IComparer*** мы можем определять собственные критерии сортировки. Сделаем такой класс: 
```
public class CustomStringComparer : IComparer<string>
    {
        public int Compare(string? x, string? y)
        {
            int xL = x?.Length ?? 0;
            int yL = y?.Length ?? 0;
            return xL - yL;
        }
    }
```
Тогда вызов метода будет выглядеть так:
```
var str = new List<string>() { "Andy", "Candy", "Wend", "Pepperoni", "Banana" };

var sortedStr = str.OrderBy(s => s, new CustomStringComparer());
```
И получим такой вывод:
```
Andy
Wend
Candy
Banana
Pepperoni
```